<!doctype html>
<html lang="ar" dir="rtl">  
<head>  
  <meta charset="utf-8">  
  <meta name="viewport" content="width=device-width,initial-scale=1">  
  <title>Ø¬Ù…Ø¹ÙŠØ© Ø£Ø¬ÙŠØ§Ù„ Ø§Ù„ØºØ¯ Ù„Ù„ØªÙ†Ù…ÙŠØ© ÙˆØ§Ù„Ù†Ù‡ÙˆØ¶ Ø¨Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ù‚Ø±ÙˆÙŠ</title>  
  <style>  
    :root{  
      --green:#008043;  
      --red:#D0171D;  
      --black:#000000;  
      --white:#FFFFFF;  
    }  
    *{box-sizing:border-box}  
    body{font-family:Tahoma,Arial,Helvetica,sans-serif;margin:0;background:#f7faf7;color:var(--black)}  
    header{background:linear-gradient(90deg,var(--green),var(--red));color:#fff;padding:20px 0;text-align:center}  
    header h1{margin:0;font-size:1.6rem}  
    nav{display:flex;justify-content:center;flex-wrap:wrap;gap:12px;margin-top:12px}  
    nav a{color:#fff;text-decoration:none;background:rgba(255,255,255,0.08);padding:8px 12px;border-radius:8px;transition:0.3s}  
    nav a:hover{background:rgba(255,255,255,0.25)}  
    .container{max-width:980px;margin:20px auto;padding:0 16px}  
    h2{margin-top:0}  
    .card{background:#fff;padding:14px;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,0.05)}  
    ul{padding:0 18px}  
    .members li{margin-bottom:6px}  
    footer{text-align:center;color:#444;margin:30px 0}  
    label{display:block;margin:8px 0 6px}  
    input,textarea,select{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px}  
    button{background:var(--green);color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;transition:0.3s}  
    button:hover{background:var(--red)}  
    .grid{display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:18px}  
    @media(max-width:880px){.grid{grid-template-columns:1fr}}  
    .activities-list{display:flex;flex-direction:column;gap:12px;margin-top:12px}  
    .activity{border-right:4px solid var(--green);padding:8px 12px;background:#fff;border-radius:6px}  
    .activity img{width:100%;border-radius:6px;margin-bottom:6px}  
  </style>  
</head>  
<body>  
  <header>  
    <h1>Ø¬Ù…Ø¹ÙŠØ© Ø£Ø¬ÙŠØ§Ù„ Ø§Ù„ØºØ¯ Ù„Ù„ØªÙ†Ù…ÙŠØ© ÙˆØ§Ù„Ù†Ù‡ÙˆØ¶ Ø¨Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ù‚Ø±ÙˆÙŠ</h1>  
    <nav>  
      <a href="#home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>  
      <a href="#about">Ù…Ù† Ù†Ø­Ù†</a>  
      <a href="#membership">Ø§Ù„Ø§Ù†Ø®Ø±Ø§Ø· / Ø§Ù„ØªØ¨Ø±Ø¹</a>  
      <a href="#activities">Ø§Ù„Ø£Ù†Ø´Ø·Ø© ÙˆØ§Ù„Ø£Ø®Ø¨Ø§Ø±</a>  
      <a href="#contact">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>  
    </nav>  
  </header>  

  <main class="container">  
    <section id="activities" class="card" style="margin-top:18px">  
      <h2>Ø§Ù„Ø£Ù†Ø´Ø·Ø© ÙˆØ§Ù„Ø£Ø®Ø¨Ø§Ø±</h2>  
      <p>ÙŠÙ…ÙƒÙ† Ù„Ù„Ø£Ø¹Ø¶Ø§Ø¡ ÙÙ‚Ø· Ù†Ø´Ø± Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø¨Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„Ø¹Ø¶Ùˆ.</p>  

      <div id="activitiesList" class="activities-list"></div>  

      <div id="memberLoginDiv">  
        <label>Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù†Ø´Ø±</label>  
        <input id="memberCodeInput" type="password" placeholder="Ø±Ù…Ø² Ø§Ù„Ø¹Ø¶Ùˆ">  
        <button onclick="tryMemberLogin()">Ø¯Ø®ÙˆÙ„</button>  
        <p id="loginMsg" style="color:red;"></p>  
      </div>  

      <div id="secretArea" style="display:none; margin-top:12px">  
        <h4>Ù†Ø´Ø± Ù†Ø´Ø§Ø· Ø¬Ø¯ÙŠØ¯</h4>  
        <form id="activityForm" onsubmit="return addActivity(event)">  
          <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†Ø´Ø§Ø·</label>  
          <input id="postTitle" required>  
          <label>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù†Ø´Ø§Ø·</label>  
          <textarea id="postBody" rows="4" required></textarea>  
          <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø§Ø·</label>  
          <input id="postDate" type="date">  
          <label>ØµÙˆØ±Ø© Ø§Ù„Ù†Ø´Ø§Ø· (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>  
          <input id="postImage" type="file" accept="image/*">  
          <button type="submit">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø§Ø·</button>  
        </form>  
      </div>  
    </section>
  </main>  

  <footer>  
    <div class="container">  
      <p>Â© Ø¬Ù…Ø¹ÙŠØ© Ø£Ø¬ÙŠØ§Ù„ Ø§Ù„ØºØ¯ Ù„Ù„ØªÙ†Ù…ÙŠØ© ÙˆØ§Ù„Ù†Ù‡ÙˆØ¶ Ø¨Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ù‚Ø±ÙˆÙŠ â€” Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>  
      <p>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø·Ø±Ù Ø´Ø§Ø¯ÙŠ Ø§Ù„Ø°Ù‡Ø¨</p>  
    </div>  
  </footer>  

  <!-- Firebase SDKs -->  
  <script type="module">
    // Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
    import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-storage.js";

    // Ø¥Ø¹Ø¯Ø§Ø¯ Firebase Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
    const firebaseConfig = {
      apiKey: "AIzaSyC8vlv48Z0fqhxXZp9_rGRsyfYHtvZrpiI",
      authDomain: "ajyallradassociation.firebaseapp.com",
      projectId: "ajyallradassociation",
      storageBucket: "ajyallradassociation.firebasestorage.app",
      messagingSenderId: "747684346301",
      appId: "1:747684346301:web:c89dbab1fd98fffa243ad4",
      measurementId: "G-BKEPCFS04V"
    };

    // ØªÙ‡ÙŠØ¦Ø© Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const storage = getStorage(app);

    const MEMBER_CODE = "Ajyal.2025";

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ù…Ù† Firestore
    async function loadActivities() {
      const q = query(collection(db, "activities"), orderBy("date", "desc"));
      const querySnapshot = await getDocs(q);
      const container = document.getElementById("activitiesList");
      container.innerHTML = "";
      if (querySnapshot.empty) {
        container.innerHTML = "<p>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø¨Ø¹Ø¯.</p>";
        return;
      }
      querySnapshot.forEach((doc) => {
        const act = doc.data();
        const div = document.createElement("div");
        div.className = "activity";
        div.innerHTML = `
          ${act.image ? `<img src="${act.image}" alt="${act.title}">` : ""}
          <h4>${act.title}</h4>
          <p>${act.body}</p>
          <small>ğŸ“… ${act.date}</small>
        `;
        container.appendChild(div);
      });
    }

    // ØªØ­Ù‚Ù‚ Ø±Ù…Ø² Ø§Ù„Ø¹Ø¶Ùˆ
    function tryMemberLogin() {
      const code = document.getElementById("memberCodeInput").value.trim();
      const msg = document.getElementById("loginMsg");
      if (code === MEMBER_CODE) {
        document.getElementById("secretArea").style.display = "block";
        document.getElementById("memberLoginDiv").style.display = "none";
        msg.textContent = "";
      } else {
        msg.textContent = "Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­.";
      }
    }

    // Ø¥Ø¶Ø§ÙØ© Ù†Ø´Ø§Ø· Ø¬Ø¯ÙŠØ¯
    async function addActivity(event) {
      event.preventDefault();
      const title = document.getElementById("postTitle").value.trim();
      const body = document.getElementById("postBody").value.trim();
      const date = document.getElementById("postDate").value || new Date().toISOString().split("T")[0];
      const imageInput = document.getElementById("postImage");
      let imageURL = "";

      if (imageInput.files && imageInput.files[0]) {
        const file = imageInput.files[0];
        const storageRef = ref(storage, `activities/${Date.now()}_${file.name}`);
        await uploadBytes(storageRef, file);
        imageURL = await getDownloadURL(storageRef);
      }

      await addDoc(collection(db, "activities"), { title, body, date, image: imageURL });
      document.getElementById("activityForm").reset();
      alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø§Ø· Ø¨Ù†Ø¬Ø§Ø­!");
      loadActivities();
    }

    loadActivities();
  </script>
</body>  
</html>          ${act.image ? `<img src="${act.image}" alt="${act.title}">` : ''}
          <h4>${act.title}</h4>
          <p>${act.body}</p>
          <small>ğŸ“… ${act.date}</small>
        `;
        container.appendChild(div);
      });
    }

    // ØªØ­Ù‚Ù‚ Ø±Ù…Ø² Ø§Ù„Ø¹Ø¶Ùˆ
    function tryMemberLogin(){
      const code = document.getElementById('memberCodeInput').value.trim();
      const msg = document.getElementById('loginMsg');
      if(code === MEMBER_CODE){
        document.getElementById('secretArea').style.display = 'block';
        document.getElementById('memberLoginDiv').style.display = 'none';
        msg.textContent = '';
      } else {
        msg.textContent = 'Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­.';
      }
    }

    // Ø¥Ø¶Ø§ÙØ© Ù†Ø´Ø§Ø· Ø¬Ø¯ÙŠØ¯
    function addActivity(event){
      event.preventDefault();
      const title = document.getElementById('postTitle').value.trim();
      const body = document.getElementById('postBody').value.trim();
      const date = document.getElementById('postDate').value || new Date().toISOString().split('T')[0];
      const imageInput = document.getElementById('postImage');
      let imageURL = '';
      if(imageInput.files && imageInput.files[0]){
        imageURL = URL.createObjectURL(imageInput.files[0]);
      }
      activities.push({title, body, date, image: imageURL});
      loadActivities();
      document.getElementById('activityForm').reset();
      alert('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø§Ø· Ø¨Ù†Ø¬Ø§Ø­!');
    }

    loadActivities();
  </script>
</body>
</html>
