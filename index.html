<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>جمعية أجيال الغد للتنمية والنهوض بالعالم القروي</title>
  <style>
    :root{
      --green:#008043;
      --red:#D0171D;
      --black:#000000;
      --white:#FFFFFF;
    }
    *{box-sizing:border-box}
    body{font-family:Tahoma,Arial,Helvetica,sans-serif;margin:0;background:#f7faf7;color:var(--black)}
    header{background:linear-gradient(90deg,var(--green),var(--red));color:#fff;padding:20px 0;text-align:center}
    header h1{margin:0;font-size:1.6rem}
    nav{display:flex;justify-content:center;flex-wrap:wrap;gap:12px;margin-top:12px}
    nav a{color:#fff;text-decoration:none;background:rgba(255,255,255,0.08);padding:8px 12px;border-radius:8px;transition:0.3s}
    nav a:hover{background:rgba(255,255,255,0.25)}
    .container{max-width:980px;margin:20px auto;padding:0 16px}
    h2{margin-top:0}
    .card{background:#fff;padding:14px;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,0.05)}
    ul{padding:0 18px}
    .members li{margin-bottom:6px}
    footer{text-align:center;color:#444;margin:30px 0}
    label{display:block;margin:8px 0 6px}
    input,textarea,select{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px}
    button{background:var(--green);color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;transition:0.3s}
    button:hover{background:var(--red)}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:18px}
    @media(max-width:880px){.grid{grid-template-columns:1fr}}
    .activities-list{display:flex;flex-direction:column;gap:12px;margin-top:12px}
    .activity{border-right:4px solid var(--green);padding:8px 12px;background:#fff;border-radius:6px}
    .activity img{width:100%;border-radius:6px;margin-bottom:6px}
  </style>
</head>
<body>
  <header>
    <h1>جمعية أجيال الغد للتنمية والنهوض بالعالم القروي</h1>
    <nav>
      <a href="#home">الرئيسية</a>
      <a href="#about">من نحن</a>
      <a href="#membership">الانخراط / التبرع</a>
      <a href="#activities">الأنشطة والأخبار</a>
      <a href="#contact">اتصل بنا</a>
    </nav>
  </header>  

  <main class="container">
    <!-- بقية الأقسام تبقى كما هي -->

    <section id="activities" class="card" style="margin-top:18px">
      <h2>الأنشطة والأخبار</h2>
      <p>يمكن للأعضاء فقط نشر الأنشطة بعد إدخال رمز العضو.</p>

      <!-- عرض الأنشطة للزوار -->
      <div id="activitiesList" class="activities-list"></div>

      <!-- نموذج دخول الأعضاء -->
      <div id="memberLoginDiv">
        <label>أدخل الرمز للوصول للنشر</label>
        <input id="memberCodeInput" type="password" placeholder="رمز العضو">
        <button onclick="tryMemberLogin()">دخول</button>
        <p id="loginMsg" style="color:red;"></p>
      </div>

      <!-- نموذج نشر الأعضاء -->
      <div id="secretArea" style="display:none; margin-top:12px">
        <h4>نشر نشاط جديد</h4>
        <form id="activityForm" onsubmit="return addActivity(event)">
          <label>عنوان النشاط</label>
          <input id="postTitle" required>
          <label>تفاصيل النشاط</label>
          <textarea id="postBody" rows="4" required></textarea>
          <label>تاريخ النشاط</label>
          <input id="postDate" type="date">
          <label>صورة النشاط (اختياري)</label>
          <input id="postImage" type="file" accept="image/*">
          <button type="submit">إضافة النشاط</button>
        </form>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>© جمعية أجيال الغد للتنمية والنهوض بالعالم القروي — جميع الحقوق محفوظة</p>
      <p>تم إنشاء هذا الموقع من طرف شادي الذهب</p>
    </div>
  </footer>

  <script>
    const MEMBER_CODE = 'Ajyal.2025';
    let activities = []; // هنا غادي نخزن النشاطات

    // تحميل وعرض الأنشطة
    function loadActivities(){
      const container = document.getElementById('activitiesList');
      container.innerHTML = '';
      if(activities.length === 0){
        container.innerHTML = "<p>لم يتم العثور على الأنشطة بعد.</p>";
        return;
      }
      // ترتيب من الأحدث للأقدم
      activities.sort((a,b)=> new Date(b.date) - new Date(a.date));
      activities.forEach(act=>{
        const div = document.createElement('div');
        div.className = 'activity';
        div.innerHTML = `
          ${act.image ? `<img src="${act.image}" alt="${act.title}">` : ''}
          <h4>${act.title}</h4>
          <p>${act.body}</p>
          <small>📅 ${act.date}</small>
        `;
        container.appendChild(div);
      });
    }

    // تحقق رمز العضو
    function tryMemberLogin(){
      const code = document.getElementById('memberCodeInput').value.trim();
      const msg = document.getElementById('loginMsg');
      if(code === MEMBER_CODE){
        document.getElementById('secretArea').style.display = 'block';
        document.getElementById('memberLoginDiv').style.display = 'none';
        msg.textContent = '';
      } else {
        msg.textContent = 'رمز غير صحيح.';
      }
    }

    // إضافة نشاط جديد
    function addActivity(event){
      event.preventDefault();
      const title = document.getElementById('postTitle').value.trim();
      const body = document.getElementById('postBody').value.trim();
      const date = document.getElementById('postDate').value || new Date().toISOString().split('T')[0];
      const imageInput = document.getElementById('postImage');
      let imageURL = '';
      if(imageInput.files && imageInput.files[0]){
        imageURL = URL.createObjectURL(imageInput.files[0]);
      }
      activities.push({title, body, date, image: imageURL});
      loadActivities();
      document.getElementById('activityForm').reset();
      alert('تمت إضافة النشاط بنجاح!');
    }

    loadActivities();
  </script>
</body>
</html>
