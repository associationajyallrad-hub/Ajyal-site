<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ุฌูุนูุฉ ุฃุฌูุงู ุงูุบุฏ ููุชูููุฉ ูุงููููุถ ุจุงูุนุงูู ุงููุฑูู</title>
  <style>
    :root{
      --green:#008043;
      --red:#D0171D;
      --black:#000000;
      --white:#FFFFFF;
    }
    *{box-sizing:border-box}
    body{font-family:Tahoma,Arial,Helvetica,sans-serif;margin:0;background:#f7faf7;color:var(--black)}
    header{background:linear-gradient(90deg,var(--green),var(--red));color:#fff;padding:20px 0;text-align:center}
    header h1{margin:0;font-size:1.6rem}
    nav{display:flex;justify-content:center;flex-wrap:wrap;gap:12px;margin-top:12px}
    nav a{color:#fff;text-decoration:none;background:rgba(255,255,255,0.08);padding:8px 12px;border-radius:8px;transition:0.3s}
    nav a:hover{background:rgba(255,255,255,0.25)}
    .container{max-width:980px;margin:20px auto;padding:0 16px}
    h2{margin-top:0}
    .card{background:#fff;padding:14px;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,0.05)}
    ul{padding:0 18px}
    .members li{margin-bottom:6px}
    footer{text-align:center;color:#444;margin:30px 0}
    label{display:block;margin:8px 0 6px}
    input,textarea,select{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px}
    button{background:var(--green);color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;transition:0.3s}
    button:hover{background:var(--red)}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:18px}
    @media(max-width:880px){.grid{grid-template-columns:1fr}}
    .activities-list{display:flex;flex-direction:column;gap:12px;margin-top:12px}
    .activity{border-right:4px solid var(--green);padding:8px 12px;background:#fff;border-radius:6px}
  </style>
</head>
<body>
  <header>
    <h1>ุฌูุนูุฉ ุฃุฌูุงู ุงูุบุฏ ููุชูููุฉ ูุงููููุถ ุจุงูุนุงูู ุงููุฑูู</h1>
    <nav>
      <a href="#home">ุงูุฑุฆูุณูุฉ</a>
      <a href="#about">ูู ูุญู</a>
      <a href="#membership">ุงูุงูุฎุฑุงุท / ุงูุชุจุฑุน</a>
      <a href="#membersArea">ุฎุงุต ุจุฃุนุถุงุก ุงูุฌูุนูุฉ</a>
      <a href="#ourActivities">ุฃูุดุทุชูุง</a>
      <a href="#contact">ุงุชุตู ุจูุง</a>
    </nav>
  </header>  

  <main class="container">
    <section id="home" class="card">
      <h2>ูุฑุญุจุง ุจูู ูู ูููุน ุงูุฌูุนูุฉ</h2>
      <p>ุฌูุนูุฉ ุฃุฌูุงู ุงูุบุฏ ููุชูููุฉ ูุงููููุถ ุจุงูุนุงูู ุงููุฑูู ุชุนูู ุนูู ุชุนุฒูุฒ ุงูุชูููุฉ ูู ุงูููุงุทู ุงููุฑููุฉ ูู ุฎูุงู ูุดุงุฑูุน ุชุฑุจููุฉุ ุงุฌุชูุงุนูุฉ ูุซูุงููุฉ.</p>
    </section>

    <div class="grid">
      <div>
        <section id="about" class="card">
          <h2>ูู ูุญู</h2>
          <p>ุฌูุนูุฉ ุฃุฌูุงู ุงูุบุฏ ููุชูููุฉ ูุงููููุถ ุจุงูุนุงูู ุงููุฑูู ูู ุฌูุนูุฉ ุชูุฏู ุฅูู ุชุนุฒูุฒ ุงูุชูููุฉ ูู ุงูููุงุทู ุงููุฑููุฉ ูู ุฎูุงู ุงููุดุงุฑูุน ุงูุชุฑุจููุฉ ูุงูุงุฌุชูุงุนูุฉ ูุงูุซูุงููุฉ.</p>
          <h3>ุฃุนุถุงุก ุงูููุชุจ</h3>
          <ul class="members">
            <li>ูููุณ ุงูุณูุงูู โ ุงูุฑุฆูุณ</li>
            <li>ุงููุนุงุดู ุงูููุฏู โ ูุงุฆุจ ุงูุฑุฆูุณ</li>
            <li>ุทุงุฑู ุงูุณูุงูู โ ุงููุงุชุจ ุงูุนุงู</li>
            <li>ุดุงุฏู ุงูุฐูุจ โ ูุงุฆุจ ุงููุงุชุจ</li>
            <li>ุงุจุฑุงููู ุงูุณูุงูู โ ุฃููู ุงููุงู</li>
            <li>ุนุจุฏ ุงูุนุฒูุฒ ุงูุฒูุฑุงูู โ ูุงุฆุจ ุงูุฃููู</li>
          </ul>
          <h3>ุงููุณุชุดุงุฑูู</h3>
          <ul>
            <li>ูุญูุฏ ุดููู</li>
            <li>ุนุจุฏ ุงูุฅูู ุงูุนูุงุฏ</li>
            <li>ุนุจุฏ ุงููุงุฏู ุงูุนูููุฉ</li>
            <li>ุญุณุงู ุงููุนุงุดู</li>
            <li>ุฎุฏูุฌุฉ ุงูุดุฑุงูู</li>
          </ul>
        </section>

        <section id="membership" class="card" style="margin-top:18px">
          <h3>ุงูุฎุฑุงุท / ุชุจุฑุน</h3>
          <p>ุณูุชู ุฅุฑุณุงู ูุนูููุงุช ุงูุงุณุชูุงุฑุฉ ูุจุงุดุฑุฉ ุฅูู ุจุฑูุฏ ุงูุฌูุนูุฉ ุนุจุฑ Formspree</p>
          <form action="https://formspree.io/f/xzzjojkl" method="POST">
            <label>ุงูุงุณู ุงููุงูู</label>
            <input name="name" required>
            <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
            <input name="email" type="email" required>
            <label>ุงููุงุชู</label>
            <input name="phone">
            <label>ุงููุฏููุฉ</label>
            <input name="city">
            <label>ููุน ุงูุทูุจ</label>
            <select name="type">
              <option value="ุงูุฎุฑุงุท">ุงูุฎุฑุงุท</option>
              <option value="ุชุจุฑุน">ุชุจุฑุน</option>
            </select>
            <label>ุงููุจูุบ (ุฅู ูุงู ุชุจุฑุนูุง)</label>
            <input name="amount" type="number" min="0">
            <label>ุฑุณุงูุฉ / ููุงุญุธุฉ</label>
            <textarea name="message" rows="3"></textarea>
            <button type="submit">ุฅุฑุณุงู ุฅูู ุงูุฌูุนูุฉ</button>
          </form>
        </section>

        <!-- ูุณู ุฎุงุต ุจุงูุฃุนุถุงุก -->
        <section id="membersArea" class="card" style="margin-top:18px">
          <h2>ุฎุงุต ุจุฃุนุถุงุก ุงูุฌูุนูุฉ</h2>
          <p>ูููู ููุฃุนุถุงุก ููุท ูุดุฑ ุงูุฃูุดุทุฉ ุจุนุฏ ุฅุฏุฎุงู ุฑูุฒ ุงูุนุถู.</p>

          <div id="memberLoginDiv">
            <label>ุฃุฏุฎู ุงูุฑูุฒ ูููุตูู ูููุดุฑ</label>
            <input id="memberCodeInput" type="password" placeholder="ุฑูุฒ ุงูุนุถู">
            <button onclick="tryMemberLogin()">ุฏุฎูู</button>
            <p id="loginMsg" style="color:red;"></p>
          </div>

          <div id="secretArea" style="display:none; margin-top:12px">
            <h4>ูุดุฑ ูุดุงุท ุฌุฏูุฏ</h4>
            <form id="activityForm" onsubmit="return submitActivity(event)">
              <label>ุนููุงู ุงููุดุงุท</label>
              <input id="postTitle" required>
              <label>ุชูุงุตูู ุงููุดุงุท</label>
              <textarea id="postBody" rows="4" required></textarea>
              <label>ุชุงุฑูุฎ ุงููุดุงุท</label>
              <input id="postDate" type="date">
              <label>ุฑุงุจุท ุตูุฑุฉ ุงููุดุงุท (ุงุฎุชูุงุฑู)</label>
              <input id="postImage" type="url" placeholder="https://">
              <button type="submit">ุฅุฑุณุงู ุงููุดุงุท ุฅูู ุงูุฌูุนูุฉ</button>
            </form>
          </div>
        </section>

        <!-- ูุณู ุนุฑุถ ุงูุฃูุดุทุฉ -->
        <section id="ourActivities" class="card" style="margin-top:18px">
          <h2>ุฃูุดุทุชูุง</h2>
          <div id="activitiesList" class="activities-list"></div>
        </section>
      </div>

      <aside>
        <section id="contact" class="card">
          <h3>ุงุชุตู ุจูุง</h3>
          <p>ุจุฑูุฏ ุงูุฌูุนูุฉ: <strong>associationajyallrad@gmail.com</strong></p>
          <p>ุตูุญุฉ ุงูุฌูุนูุฉ ุนูู ููุณุจูู: <a href="https://www.facebook.com/profile.php?id=61566263870851" target="_blank">ุงุถุบุท ููุง</a></p>
          <p>ููุงุฉ ูุงุชุณุงุจ: <a href="https://whatsapp.com/channel/0029Vb71syUGJP8Qcz0WFM1M" target="_blank">ุงุถุบุท ููุง ููุงูุถูุงู</a></p>
        </section>
      </aside>
    </div>
  </main>

  <footer>
    <div class="container">
      <p>ยฉ ุฌูุนูุฉ ุฃุฌูุงู ุงูุบุฏ ููุชูููุฉ ูุงููููุถ ุจุงูุนุงูู ุงููุฑูู โ ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
      <p>ุชู ุฅูุดุงุก ูุฐุง ุงููููุน ูู ุทุฑู ุดุงุฏู ุงูุฐูุจ</p>
    </div>
  </footer>

  <script>
    const MEMBER_CODE = 'Ajyal.2025';

    // ูุนูููุงุช Airtable
    const AIRTABLE_API_KEY = 'patLB8b1AdVwsgn85.c0ea0a01bfb72b8b8b29ae893343fd92c7f652253527e12fc580bc44b75959b4';
    const AIRTABLE_BASE_ID = 'appxOtIGRqw9qyDYJ';
    const AIRTABLE_TABLE_NAME = 'tbly1bdQfRe57khJc';

    function tryMemberLogin(){
      const code = document.getElementById('memberCodeInput').value.trim();
      const msg = document.getElementById('loginMsg');
      if(code === MEMBER_CODE){
        document.getElementById('secretArea').style.display = 'block';
        document.getElementById('memberLoginDiv').style.display = 'none';
        msg.textContent = '';
      } else {
        msg.textContent = 'ุฑูุฒ ุบูุฑ ุตุญูุญ.';
      }
    }

    async function submitActivity(event){
      event.preventDefault();
      const title = document.getElementById('postTitle').value.trim();
      const body = document.getElementById('postBody').value.trim();
      const date = document.getElementById('postDate').value;
      const image = document.getElementById('postImage').value;

      if(!title || !body){
        alert('ุงููุฑุฌู ุฅุฏุฎุงู ุนููุงู ูุชูุงุตูู ุงููุดุงุท.');
        return;
      }

      const data = { fields: { ุนููุงู: title, ุชูุงุตูู: body, ุชุงุฑูุฎ: date, ุตูุฑุฉ: image } };

      try {
        const res = await fetch(`https://api.airtable.com/v0/${AIRTABLE_BASE_ID}/${AIRTABLE_TABLE_NAME}`, {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${AIRTABLE_API_KEY}`,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        });

        if(res.ok){
          alert('ุชู ูุดุฑ ุงููุดุงุท ุจูุฌุงุญ!');
          document.getElementById('activityForm').reset();
          loadActivities();
        } else {
          alert('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงููุดุฑ.');
        }
      } catch (err) {
        console.error(err);
        alert('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุงุชุตุงู ุจู Airtable.');
      }
    }

    async function loadActivities(){
      try {
        const res = await fetch(`https://api.airtable.com/v0/${AIRTABLE_BASE_ID}/${AIRTABLE_TABLE_NAME}?sort[0][field]=ุชุงุฑูุฎ&sort[0][direction]=desc`, {
          headers: { 'Authorization': `Bearer ${AIRTABLE_API_KEY}` }
        });
        const data = await res.json();
        const container = document.getElementById('activitiesList');
        container.innerHTML = '';

        data.records.forEach(act => {
          const fields = act.fields;
          const card = document.createElement('div');
          card.className = 'activity';

          const title = document.createElement('h3');
          title.textContent = fields.ุนููุงู || 'ุจุฏูู ุนููุงู';

          const date = document.createElement('small');
          if(fields.ุชุงุฑูุฎ) date.textContent = "๐ " + fields.ุชุงุฑูุฎ;

          const body = document.createElement('p');
          body.textContent = fields.ุชูุงุตูู || '';

          card.appendChild(title);
          if(fields.ุชุงุฑูุฎ) card.appendChild(date);
          card.appendChild(body);

          if(fields.ุตูุฑุฉ){
            const img = document.createElement('img');
            img.src = fields.ุตูุฑุฉ;
            img.style.width = '100%';
            img.style.borderRadius = '6px';
            img.style.marginTop = '8px';
            card.appendChild(img);
          }

          container.appendChild(card);
        });

      } catch (err) {
        console.error(err);
        document.getElementById('activitiesList').innerHTML = '<p>ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงูุฃูุดุทุฉ.</p>';
      }
    }

    document.addEventListener('DOMContentLoaded', loadActivities);
  </script>
</body>
</html>
